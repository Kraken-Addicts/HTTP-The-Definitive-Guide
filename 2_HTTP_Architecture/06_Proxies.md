## 06장 :octopus: 프락시

[6.1　웹 중개자](#61---웹-중개자-jehong)<br>
[6.2　왜 프락시를 사용하는가?](#62---왜-프락시를-사용하는가-jehong)<br>
[6.3　프락시는 어디에 있는가?](#63---프락시는-어디에-있는가-taelee)<br>
[6.4　클라이언트 프락시 설정](#64---클라이언트-프락시-설정-yeosong)<br>
[6.5　프락시 요청의 미묘한 특징들](#65---프락시-요청의-미묘한-특징들-hylee)<br>
[6.6　메시지의 추적](#66---메시지-추적-yeha)<br>
[6.7　프락시 인증](#67---프락시-인증-kukim)<br>
[6.8　프락시 상호운용성](#68---프락시-상호운용성-kukim)<br>

### 6.1 　  웹 중개자　 `jehong`
- 여기에
- 문제를 작성해주세요
<details>
<summary> <b> :page_facing_up: 답지 </b>  </summary>
<div markdown="1">
  
- 여기에
- 해설을 작성해주세요

</div>
</details>
<br>

### 6.2 　  왜 프락시를 사용하는가?　 `jehong`
- 여기에
- 문제를 작성해주세요
<details>
<summary> <b> :page_facing_up: 답지 </b>  </summary>
<div markdown="1">
  
- 여기에
- 해설을 작성해주세요

</div>
</details>
<br>

### 6.3 　  프락시는 어디에 있는가?　 `taelee`

1. "_____"프락시는  네트워크의 가장 끝에 있는 웹 서버들의 바로 앞에 위치하여 웹 서버로 향하는 모든 요청을 처리하고 필요할 때만 웹서버에게 자원을 요청할 수 있다.

2. 프락시 계층 콘텐츠 라우팅에서 알맞은 `동적 부모 선택 방식`을 짝지으세요.

   `a.부하 균형`, `b.지리적 인접성에 근거한 라우팅`, `c.프로토콜/타입 라우팅`, `d.유료 서비스 가입자를 위한 라우팅`, 

   1)  어떤 특정 종류의 URI를 갖고 요청한 경우, 특별한 프락시 서버로 보내져 특별하게 처리될 수도 있다. (__)

   2) 자식 프락시는 원 서버의 지역을 담당하는 부모를 선택할 수도 있다. (__)

   3) 자식 프락시는 부하를 분산하기 위해 현재 부모들의 작업량 수준에 근거하여 부모 프락시를 고른다. (__)


<details>
<summary> <b> :page_facing_up: 답지 </b>  </summary>
<div markdown="1">


1. "대리(리버스)"프락시는  네트워크의 가장 끝에 있는 웹 서버들의 바로 앞에 위치하여 웹 서버로 향하는 모든 요청을 처리하고 필요할 때만 웹서버에게 자원을 요청할 수 있다.

2. 프락시 계층 콘텐츠 라우팅에서 알맞은 `동적 부모 선택 방식`을 짝지으세요.

   `a.부하 균형`, `b.지리적 인접성에 근거한 라우팅`, `c.프로토콜/타입 라우팅`, `d.유료 서비스 가입자를 위한 라우팅`, 

   1)  어떤 특정 종류의 URI를 갖고 요청한 경우, 특별한 프락시 서버로 보내져 특별하게 처리될 수도 있다. (c)

   2) 자식 프락시는 원 서버의 지역을 담당하는 부모를 선택할 수도 있다. (b)

   3) 자식 프락시는 부하를 분산하기 위해 현재 부모들의 작업량 수준에 근거하여 부모 프락시를 고른다. (a)
   </div>
</details>
<br>

### 6.4 　  클라이언트 프락시 설정　 `yeosong`
- 여기에
- 문제를 작성해주세요
<details>
<summary> <b> :page_facing_up: 답지 </b>  </summary>
<div markdown="1">
  

#### 6.4.1 클라이언트가 프락시 수동으로 설정하기에 대한 설명이다. 옳은 것을 모두 고르시오. (1, 2)

1) 장애시 대체 작동에 대한 지원이 없다.
2) 하나의 프록시 서버만 지정가능하다.
3) 대규모 조직에서 관리 문제를 방지하기 위해 사용한다. (X)
  - 대규모 조직을 관리하기에는 정적인 대응이며, 다양한 대응 옵션이 없기 때문에 부적절하다.

#### 6.4.2  클라이언트가 PAC(Proxy auto-config)파일로 프록시를 설정하기 대한 설명이다. 빈칸을 채우시오. (주관식)

- PAC 파일은 `1) 자바스크립트`로 작성된 프로그램이다.
- PAC파일의 확장자는 .pac이고, MIME타입은 `2) application/x-ns-proxy-autoconfig` 이다.
- PAC 파일을 사용하려면, `3)브라우저 설정`에서 PAC 파일의 URI를 입력하면 된다.
- PAC 파일은 `FindProxyForUrl(url, host)` 이라는 함수를 반드시 정의해야한다.

참고: [IEAK 11에서 프록시 자동 구성(.pac) 파일 사용 예제 보기](https://docs.microsoft.com/ko-kr/internet-explorer/ie11-ieak/proxy-auto-config-examples)


PAC 파일을 작성하여 트랜잭션의 종류에 따라 각기 다른 프록시를 사용하도록 만들 수 있다.

FindProxyForUrl(url, host) 함수의 반환값은 DIRECT, PROXY host:port, SOCKS host:port이다.


#### 6.4.3 클라이언트가 WPAD로 프락시 설정하기
3. WPAD (Web Proxy Auto-Discovery Protocol)

브라우저에게 알맞은 PAC 파일을 자동으로 찾아주는 알고리즘이다.
WPAD 프로토콜이 구현된 클라가 하게 될 일은

PAC URI를 찾기 위해 WPAD를 사용한다.
주어진 URI에서 PAC파일을 가져온다.
프록시 서버를 알아내기 위해 PAC파일을 실행한다.
알아낸 프록시 서버를 이용해서 요청을 처리한다.
WPAD는 성공할 때까지 각 기법을 하나씩 시도해본다. (20장에서 자세히..)

동적 호스트 발견 규약 DHCP (Dynamic Host Configuration Protocol)
서비스 위치 규약 [SLP]
DNS 잘 알려진 호스트 명
DNS SRV 레코드
DNS TXT 레코드 안의 서비스 URI


</div>
</details>
<br>

### 6.5 　  프락시 요청의 미묘한 특징들　 `hylee`
- 여기에
- 문제를 작성해주세요
<details>
<summary> <b> :page_facing_up: 답지 </b>  </summary>
<div markdown="1">
  
- 여기에
- 해설을 작성해주세요

</div>
</details>
<br>

### 6.6 　  메시지 추적　 `yeha`
1. Via 헤더 필드는 개행으로 구분된 경유지(waypoint)의 목록이다. (O/X)  
2. 모든 Via waypoint는 4개의 구성 요소(프로토콜 이름, 프로토콜 버전, 노드 이름, 코멘트)로 구성되어 있다. (O/X)  
3. 요청 메시지와 응답 메시지 모두 프락시를 지나므로 Via 헤더를 가진다. (O/X)  
4. 응답 Via 헤더는 언제나 요청 Via 헤더와 반대다. (O/X)  
5. 응답 메시지가 프락시를 통과할 때, 프락시는 Via 항목을 추가한다. Server 헤더는 원 서버를 위해 존재하므로 수정하면 안 된다. (O/X)   
6. Server 응답 헤더 필드는 원 서버에 의해 사용되는 (______)를 알려준다.
      > Server: Apache/1.3.14 (Unix) PHP/4.0.4  
        Server: Netscape-Enterprise/4,1  
      > Server: Microsoft-IIS/5.0   
7. 프락시 서버가 네트워크 방화벽의 일부인 경우 프락시는 Via 문자열 안에 방화벽 뒤 호스트의 이름과 포트를 전달하면 안 된다. (O/X)  
7-1. 방화벽 뒤 네트워크 아키텍처에 대한 정보가 나쁘게 이용될 수 있기 때문이다. (O/X)  
8. TRACE 요청이 목적지 서버에 도착 시, 서버는 요청 메시지를 검토한 후 HTTP 응답 메시지에 상태(e.g. 200 OK)를 추가하여 송신자에게 돌려보낸다. (O/X)  

<details>
<summary> <b> :page_facing_up: 답지 </b>  </summary>
<div markdown="1">
  
1. Via 헤더 필드는 개행으로 구분된 경유지의 목록이다. (X)  
  => 쉼표로 구분한다  
2. 모든 Via waypoint는 4개의 구성 요소(프로토콜 이름, 프로토콜 버전, 노드 이름, 코멘트)로 구성되어 있다. (X)  
  => 4개의 구성요소는 맞으나 모두 필수는 아니다. (프로토콜 이름(선택), 프로토콜 버전(필수), 노드 이름(필수), 코멘트(선택))   
3. 요청 메시지와 응답 메시지 모두 프락시를 지나므로 Via 헤더를 가진다. (O)   
4. 응답 Via 헤더는 언제나 요청 Via 헤더와 반대다. (O)  
  => p.175 그림 참조   
5. 응답 메시지가 프락시를 통과할 때, 프락시는 Via 항목을 추가한다. Server 헤더는 원 서버를 위해 존재하므로 수정하면 안 된다. (O)   
6. Server 응답 헤더 필드는 원 서버에 의해 사용되는 (소프트웨어)를 알려준다.  
7. 프락시 서버가 네트워크 방화벽의 일부인 경우 프락시는 Via 문자열 안에 방화벽 뒤 호스트의 이름과 포트를 전달하면 안 된다. (O)    
  => 보통 명시적으로 이 동작이 켜져 있지 않은 이상 정확한 호스트명을 전달은 X  
7-1. 방화벽 뒤 네트워크 아키텍처에 대한 정보가 나쁘게 이용될 수 있기 때문이다. (O)   
  => p.176 하단 참고  
8. TRACE 요청이 목적지 서버에 도착 시, 서버는 요청 메시지를 검토한 후 HTTP 응답 메시지에 상태(e.g. 200 OK)를 추가하여 송신자에게 돌려보낸다. (X)   
  => p.177 TRACE 요청이 목적지 서버에 도착 시, 서버는 전체 요청 메시지를 HTTP 응답 메시지 본문에 포함시켜 송신자에게 그대로 돌려보낸다.   
</div>
</details>
<br>

### 6.7 　  프락시 인증　 `kukim`
- 프락시 서버는 접근 제어 장치로 제공될 수 있다. (O / X)
- 407 상태 코드는 무엇인가요? (주관식)
- 프락시 인증은 프락시가 연쇄상에 여러 개 있을 때 잘 동작한다. (O / X)
- +ɑ) 프락시 서버가 클라이언트에게 적절하지 않는 인증 정보를 수신한다면 어떤 상태코드를 반환하는가?

<details>
<summary> <b> :page_facing_up: 답지 </b>  </summary>
<div markdown="1">
  
- 프락시 서버는 접근 제어 장치로 제공될 수 있다. (O)
  - HTTP는 사용자가 유효한 접근 권한 자격을 프락시에 제출하지 않는 한 콘텐츠에 대한 요청을 차단하는 프락시 인증이라는 메커니즘을 정의하고 있다.
- 407 상태 코드는 무엇인가요? (주관식)
  - 407 proxy Authorization Required (프록시 권한부여 요청 상태메세지), 클라이언트가 서버에 요청했을 때 중간에 있는 프락시 서버는 접근 자격을 요구하는 407 상태코드를 응답한다.
  - 클라이언트는 407 응답을 받게되면 요구되는 자격을 획득하는 proxy-authorization 헤더필드에 담아서 요청을 다시 보낸다.
- 프락시 인증은 프락시가 연쇄상에 여러 개 있을 때 잘 동작한다. (X)
  - X : 연쇄상에 있으면 인증하기 까다롭다. 
- +ɑ) 프락시 서버가 클라이언트에게 적절하지 않는 인증 정보를 수신한다면 어떤 상태코드를 반환하는가?
  - 403 Forbidden 상태코드 

참고 : HTTP 인증, https://developer.mozilla.org/ko/docs/Web/HTTP/Authentication

</div>
</details>
<br>

### 6.8 　  프락시 상호운용성　 `kukim`
- 프락시 서버는 클라이언트나 서버에게 받은 헤드 필드들은 자신이 알지 못하는 것이어도 반드시 그대로 전달해야 한다. (O)
- 프락시 서버는 같은 이름의 헤더 필드가 여러개 있는 경우에는 순서에 상관없이 전달해도 된다. (X)
- OPTIONS 메서드 요청 중 서버 전체 능력에 대해 묻는 메세지는 무엇인가? 괄호를 채우시오.  
보기 : `ALL`, `*`, `개행문자`  
`OPTIONS (    ) HTTP/1.1`
- OPTIONS 메서드의 서버 전체 능력에 대해 묻는 요청 메세지에 대한 응답 메세지이다. 괄호에 들어가는 헤더는 무엇인가? (단답식)
```
HTTP/1.1 200 OK
(    ) : GET, PUT, POST, OPTIONS
```
<details>
<summary> <b> :page_facing_up: 답지 </b>  </summary>
<div markdown="1">
  
- 프락시 서버는 클라이언트나 서버에게 받은 헤드 필드들은 자신이 알지 못하는 것이어도 반드시 그대로 전달해야 한다. (O / X)
  - 프락시는 이해할 수 없는 헤더 필드는 반드시 그대로 전달해야 한다. (프락시 서버보다 버전이 높은 새로운 헤더일 수 있고, 특정 애플리케이션을 위해 만들어진 것 일 수 있다. 
- 프락시 서버는 같은 이름의 헤더 필드가 여러개 있는 경우에는 순서에 상관없이 전달해도 된다. (O / X)
  - 상대적인 순서를 반드시 유지해야 한다. (헤더 필드들의 순서가 데이터에 영향을 미치기 때문)
- OPTIONS 메서드 요청 중 서버 전체 능력에 대해 묻는 메세지는 무엇인가? 괄호를 채우시오.  
보기 : `ALL`, `*`, `개행문자`  
`OPTIONS ( * ) HTTP/1.1`
- OPTIONS 메서드의 서버 전체 능력에 대해 묻는 요청 메세지에 대한 응답 메세지이다. 괄호에 들어가는 헤더는 무엇인가? (단답식)
```
HTTP/1.1 200 OK
( Allow ) : GET, PUT, POST, OPTIONS
```

</div>
</details>
<br>
